# Приложение для игры в мафию

Сетевой вариант игры "Мафия". Взаимодействие между клиентом и сервером обеспечивается с помощью gRPC.
В одном сеансе игры – 4 игрока: мафия, комиссар, два мирных жителя.

**Условия для победы мирных жителей: мафии не стало.**

**Условия для победы мафии: игроков-мафий не меньше, чем игроков, 
которые не являются мафией.**

## Как отключиться от игры до её завершения

Отключаться от игры можно только тогда, когда компьютер НЕ ждет от Вас ввода информации.
Например, нельзя отключаться, когда Вас просят ввести имя игрока, которого Вы хотите казнить в конце дня.
Отключиться будет можно после того, как Вы введете имя этого игрока и компьютер перестанет ожидать от 
Вас ввод информации.
Чтобы отключиться от игры, нажмите Ctrl + C. Компьютер спросит у Вас подтверждение того,
что Вы действительно хотите отключиться. Чтобы отключиться, нажмите "y" и Enter.
Будет выдано сообщение о том, что Вы отключились от игры.


## Способ 1. Как запускать с помощью virtualenv
Открыть пять окон в терминале. В одном окне нужно запустить сервер,
в остальных четырех – клиентов. Как это сделать – описано в разделе _Команды для запуска_.

### Замечание
Если запускаете с macbook, то следует оставить python3, как в командах ниже. 
Иначе надо заменить python3 на python.

### Команды для запуска
0. [ВЫПОЛНЯТЬ ТОЛЬКО ОДИН РАЗ] `git clone git@github.com:Oleg13Kopylov/mafia.git` ИЛИ 
`git clone https://github.com/Oleg13Kopylov/mafia.git`
1.  ```cd mafia```
2. Открываем один терминал для сервера и запускаем:
3. `python3 -m pip install --upgrade pip && pip install virtualenv && virtualenv venv && source venv/bin/activate`
[Здесь может понадобиться выполнить еще одну команду, если система попросит её выполнить:]
`sudo apt install python3-virtualenv`
4. `(venv)$ python -m pip install --upgrade pip && python -m pip install grpcio && python -m pip install grpcio-tools`
5. `python server.py`
6. Открываем 4 терминала для клиентов и в каждом из них в директории mafia:
7. `source venv/bin/activate && python client.py`


## Способ 2. Как запускать с помощью Docker
0. [ВЫПОЛНЯТЬ ТОЛЬКО ОДИН РАЗ] `git clone git@github.com:Oleg13Kopylov/mafia.git` ИЛИ 
`git clone https://github.com/Oleg13Kopylov/mafia.git`
1.  ```cd mafia```
2. [Убедитесь, что перед выполнением последующих команд у Вас запущен Docker] Открываем один терминал для сервера и запускаем:
3. [ДОСТАТОЧНО ВЫПОЛНИТЬ ОДИН РАЗ] `sudo docker build -f Dockerfile.server . -t server`
4. `docker run -ti --network host server`
4. Открываем 4 терминала для клиентов и в каждом из них в директории mafia:
5. [ДОСТАТОЧНО ВЫПОЛНИТЬ ОДИН РАЗ, в первом терминале] `sudo docker build -f Dockerfile.client . -t client`
6. `docker run -ti --network host client`



### Скриншоты с примером работы приложения:
В файлах:
1) **screenshot_server.jpg**
2) **screenshot_first_and_second_clients.jpg**
3) **screenshot_third_and_fourth_clients.jpg**